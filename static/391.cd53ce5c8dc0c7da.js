"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[391],{8391:(D,d,i)=>{i.r(d),i.d(d,{LoginPageModule:()=>b});var m=i(6895),u=i(451),p=i(1651),s=i(4025),r=i(433),v=i(7579),h=i(2722),o=i(4650),f=i(529),L=i(6557);let Z=(()=>{class e{constructor(t,n){this.httpClient=t,this.httpDataService=n}login(t){return this.httpDataService.post("auth/login",t)}loginWitGoogle(t){return this.httpDataService.post("auth/googleSignIn",t)}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(f.eN),o.LFG(L.L))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=i(7185),S=i(791),P=i(8248),c=i(6281);function y(e,l){1&e&&(o.TgZ(0,"p",19),o._uU(1," Please enter a valid email address "),o.qZA())}function F(e,l){1&e&&(o.TgZ(0,"p",19),o._uU(1," Email is "),o.TgZ(2,"strong"),o._uU(3,"required"),o.qZA()())}function I(e,l){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,y,2,0,"p",18),o.YNc(2,F,4,0,"p",18),o.qZA()),2&e){const t=o.oxw();let n,a;o.xp6(1),o.Q6J("ngIf",(null==(n=t.loginForm.get("email"))?null:n.hasError("pattern"))&&!(null!=(n=t.loginForm.get("email"))&&n.hasError("required"))),o.xp6(1),o.Q6J("ngIf",null==(a=t.loginForm.get("email"))?null:a.hasError("required"))}}function A(e,l){1&e&&(o.TgZ(0,"p",19),o._uU(1," Password is "),o.TgZ(2,"strong"),o._uU(3,"required"),o.qZA()())}function x(e,l){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,A,4,0,"p",18),o.qZA()),2&e){const t=o.oxw();let n;o.xp6(1),o.Q6J("ngIf",null==(n=t.loginForm.get("password"))?null:n.hasError("required"))}}const C=[{path:"",component:(()=>{class e{constructor(t,n,a,g,J){this.loginPageService=t,this.toastr=n,this.storageService=a,this.socialLoginService=g,this.router=J,this.componentDestroyed$=new v.x}ngOnInit(){this.prepareLoginForm(),this.socialLoginService.initiateGoogleAuthentication().pipe((0,h.R)(this.componentDestroyed$)).subscribe(t=>{this.loginWithGoogleApi(t)})}loginWithGoogleApi(t){console.log(t),this.loginPageService.loginWitGoogle(t).subscribe(n=>{this.loginHandler(n)},n=>{this.toastr.error("Invalid Login Details")})}prepareLoginForm(){this.loginForm=new r.nJ({email:new r.p4("",[r.kI.required,r.kI.pattern(p.u.EmailPattern)]),password:new r.p4("",[r.kI.required])})}userLogin(){this.loginPageService.login(this.loginForm.value).subscribe(t=>{this.loginHandler(t)},t=>{this.toastr.error(t.error.message??"Invalid Login Details")})}loginHandler(t){this.toastr.success("Login Successfull"),this.storageService.setDataToLocalStorage(s.I.ACCESS_TOKEN,t.accessToken),this.storageService.setDataToLocalStorage(s.I.USER_ID,t.userId),this.storageService.setDataToLocalStorage(s.I.ROLE,t.roles[0]),"Tutor"===t.roles[0]?this.router.navigate(["tutor/dashboard"]):"Student"===t.roles[0]?this.router.navigate(["student/dashboard"]):"Admin"===t.roles[0]&&this.router.navigate(["admin/dashboard"])}ngOnDestroy(){this.componentDestroyed$.next({}),this.componentDestroyed$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(Z),o.Y36(T._W),o.Y36(S.V),o.Y36(P.a),o.Y36(u.F0))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login-page"]],decls:31,vars:7,consts:[[1,"bg-pattern-style"],[1,"content"],[1,"account-content"],[1,"account-box"],[1,"login-right"],[1,"login-header"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-control-label"],["type","email","name","email","id","email","formControlName","email",1,"form-control","floating"],[4,"ngIf"],["type","password","name","password","id","password","formControlName","password",1,"form-control","floating"],["type","submit",1,"btn","btn-primary","w-100","btn-lg","login-btn","mb-1",3,"disabled"],[1,"d-flex","justify-content-center"],["type","standard",3,"text"],[1,"text-center","dont-have"],[1,"me-2",3,"routerLink"],[3,"routerLink"],["class","feild-error",4,"ngIf"],[1,"feild-error"]],template:function(t,n){if(1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),o._uU(7,"Login "),o.TgZ(8,"span"),o._uU(9,"Online Tutor"),o.qZA()()(),o.TgZ(10,"form",6),o.NdJ("ngSubmit",function(){return n.userLogin()}),o.TgZ(11,"div",7)(12,"label",8),o._uU(13,"Email Address"),o.qZA(),o._UZ(14,"input",9),o.YNc(15,I,3,2,"div",10),o.qZA(),o.TgZ(16,"div",7)(17,"label",8),o._uU(18,"Password"),o.qZA(),o._UZ(19,"input",11),o.YNc(20,x,2,1,"div",10),o.qZA(),o.TgZ(21,"button",12),o._uU(22,"Login"),o.qZA()(),o.TgZ(23,"div",13),o._UZ(24,"asl-google-signin-button",14),o.qZA(),o.TgZ(25,"div",15),o._uU(26,"Don\u2019t have an account? "),o.TgZ(27,"a",16),o._uU(28,"Register"),o.qZA(),o.TgZ(29,"a",17),o._uU(30,"Home"),o.qZA()()()()()()()),2&t){let a,g;o.xp6(10),o.Q6J("formGroup",n.loginForm),o.xp6(5),o.Q6J("ngIf",(null==(a=n.loginForm.get("email"))?null:a.invalid)&&((null==(a=n.loginForm.get("email"))?null:a.dirty)||(null==(a=n.loginForm.get("email"))?null:a.touched))),o.xp6(5),o.Q6J("ngIf",(null==(g=n.loginForm.get("password"))?null:g.invalid)&&((null==(g=n.loginForm.get("password"))?null:g.dirty)||(null==(g=n.loginForm.get("password"))?null:g.touched))),o.xp6(1),o.Q6J("disabled",n.loginForm.invalid),o.xp6(3),o.Q6J("text","signin_with"),o.xp6(3),o.Q6J("routerLink","/register"),o.xp6(2),o.Q6J("routerLink","")}},dependencies:[m.O5,u.yS,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c.TI],styles:[".feild-error[_ngcontent-%COMP%]{color:#eb8989}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[u.Bz.forChild(C),u.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[m.ez,U,r.u5,r.UX,c.RB]}),e})()}}]);