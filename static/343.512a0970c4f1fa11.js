"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[343],{6864:(g,p,c)=>{c.d(p,{F:()=>a});var r=c(4650),h=c(6557);let a=(()=>{class l{constructor(u){this.httpDataService=u}getAllCourses(){return this.httpDataService.get("course")}getSchedulesBySearchByCriteria(u){return this.httpDataService.post("schedule/searchByCriteria",u)}updateSchedule(u,_){return this.httpDataService.put(`schedule/${u}`,_)}getSchedulesByScheduleId(u){return this.httpDataService.get(`schedule/${u}`)}updateAcceptStatus(u){return this.httpDataService.post("schedule/acceptSchdule",u)}}return l.\u0275fac=function(u){return new(u||l)(r.LFG(h.L))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},4343:(g,p,c)=>{c.d(p,{B:()=>F});var r=c(2887),h=c(7914),a=(()=>{return(s=a||(a={})).STUDENT="Student",s.TUTOR="Tutor",s.ADMIN="Admin",a;var s})(),l=c(5622),t=c(4650),u=c(2912),_=c(6864),f=c(4946),S=c(7185),T=c(9886),D=c(791),m=c(6895),v=c(433),b=c(5593),x=c(5047);function C(s,o){if(1&s&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.tutorDetails.title)}}function Z(s,o){if(1&s&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tutorDetails.description," ")}}function A(s,o){if(1&s&&(t.TgZ(0,"div",29)(1,"p",30),t._uU(2,"Contact Address"),t.qZA(),t.TgZ(3,"div",31)(4,"p",32),t._UZ(5,"i",33),t._uU(6),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.tutorDetails.address,"")}}function E(s,o){if(1&s&&(t.TgZ(0,"div",24)(1,"h4",25),t._uU(2),t.qZA(),t.YNc(3,C,2,1,"p",26),t.YNc(4,Z,2,1,"p",26),t.TgZ(5,"p",27),t._uU(6),t.qZA(),t.YNc(7,A,7,1,"div",28),t.qZA()),2&s){const e=t.oxw();t.xp6(2),t.AsE("",e.displayDetails.firstName," ",e.displayDetails.lastName,""),t.xp6(1),t.Q6J("ngIf",!e.isTutor),t.xp6(1),t.Q6J("ngIf",!e.isTutor),t.xp6(2),t.hij(" ",e.displayDetails.email," "),t.xp6(1),t.Q6J("ngIf",e.isTutor)}}function y(s,o){if(1&s&&(t.TgZ(0,"div",36)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"span",37),t._uU(4),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(1),t.Tol(e.statusClass(e.scheduleDetails.status)),t.xp6(1),t.Oqu(e.scheduleDetails.status),t.xp6(2),t.hij("$",e.tutorDetails.hourlyRate," / Hour")}}function I(s,o){if(1&s&&(t.TgZ(0,"div",34),t.YNc(1,y,5,4,"div",35),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.scheduleDetails)}}function N(s,o){if(1&s&&(t.TgZ(0,"div",34)(1,"h3"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Tol(e.statusClass(e.scheduleDetails.status)),t.xp6(1),t.Oqu(e.scheduleDetails.status)}}function q(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function U(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.TgZ(2,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function J(s,o){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.BQk()}}function L(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",19)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",11)(5,"div",38)(6,"div")(7,"p"),t._uU(8,"Total Amount"),t.qZA(),t.TgZ(9,"p-inputNumber",39),t.NdJ("ngModelChange",function(n){t.CHM(e);const d=t.oxw();return t.KtG(d.totalAmountTobePaid=n)}),t.qZA()(),t.TgZ(10,"div"),t.YNc(11,q,3,0,"ng-container",40),t.YNc(12,U,3,0,"ng-container",40),t.YNc(13,J,3,0,"ng-container",40),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.totalAmountTobePaid),t.xp6(2),t.Q6J("ngIf",e.statusList.REQUESTED===e.scheduleDetails.status),t.xp6(1),t.Q6J("ngIf",e.statusList.ACCEPTED===e.scheduleDetails.status),t.xp6(1),t.Q6J("ngIf",e.statusList.REJECTED===e.scheduleDetails.status)}}function P(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.navigateToPayment())}),t.qZA()}}function w(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA()}}function R(s,o){if(1&s){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REQUESTED))}),t.qZA()}}function k(s,o){if(1&s&&(t.TgZ(0,"div",10)(1,"div",19)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",11)(5,"div",38)(6,"div")(7,"h4"),t._uU(8,"Total Amount To be Paid"),t.qZA(),t.TgZ(9,"h3",45),t._uU(10),t.qZA()(),t.TgZ(11,"div"),t.YNc(12,P,1,0,"button",46),t.YNc(13,w,1,0,"button",47),t.YNc(14,R,1,0,"button",48),t.qZA()()()()),2&s){const e=t.oxw();t.xp6(10),t.hij("$",e.totalAmountTobePaid,""),t.xp6(2),t.Q6J("ngIf",e.scheduleDetails.status===e.statusList.ACCEPTED),t.xp6(1),t.Q6J("ngIf",e.scheduleDetails.status!==e.statusList.CANCELLED),t.xp6(1),t.Q6J("ngIf",e.scheduleDetails.status===e.statusList.CANCELLED)}}function B(s,o){if(1&s&&(t.TgZ(0,"div",54)(1,"div")(2,"h5"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()),2&s){const e=o.$implicit,i=t.oxw(2);t.xp6(3),t.hij("",t.xi3(4,3,e.date,"MMM d, y")," "),t.xp6(3),t.AsE("",i.timeValues[e.from]," - ",i.timeValues[e.to],"")}}function Y(s,o){if(1&s&&(t.TgZ(0,"div",52),t.YNc(1,B,7,6,"div",53),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.scheduleDetails.slots)}}function M(s,o){1&s&&t._UZ(0,"hr")}function Q(s,o){if(1&s&&(t.TgZ(0,"div")(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"p",57),t._uU(4),t.qZA(),t.YNc(5,M,1,0,"hr",40),t.qZA()),2&s){const e=o.$implicit,i=o.last;t.xp6(2),t.Oqu(e.courseName),t.xp6(2),t.Oqu(e.courseDiscription),t.xp6(1),t.Q6J("ngIf",!i)}}function O(s,o){if(1&s&&(t.TgZ(0,"div",55)(1,"h4",20),t._uU(2,"Course Details"),t.qZA(),t._UZ(3,"hr"),t.YNc(4,Q,6,3,"div",56),t.qZA()),2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.scheduleDetails.subjects)}}let F=(()=>{class s{constructor(e,i,n,d,K,$,j,H){this.router=e,this.activatedRoute=i,this.sharedSchedulesService=n,this.studentSchedulesService=d,this.toastrService=K,this.modalService=$,this.SchedulesService=j,this.storageService=H,this.scheduleId="",this.timeValues=h.a,this.statusList=l.q,this.logedinUserRole="tutor",this.isTutor=!1,this.slots=[],this.totalAmountTobePaid=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("role");this.logedinUserRole=e===a.TUTOR?"tutor":"student",this.isTutor=e===a.TUTOR,this.activatedRoute.queryParams.subscribe(i=>{this.scheduleId=i.sid}),this.scheduleId&&""!==this.scheduleId&&this.getSchedulesDetailsByScheduleId()}getSchedulesDetailsByScheduleId(){this.sharedSchedulesService.getSchedulesByScheduleId(this.scheduleId).subscribe(e=>{this.scheduleDetails=e?.schedule,this.tutorDetails=e?.schedule?.tutor[0],this.displayDetails="tutor"===this.logedinUserRole?e?.schedule?.tutor[0]:e?.schedule?.student[0],this.slots=e?.schedule?.slots,this.calculateTotalAmount()})}statusClass(e){return e===l.q.ACCEPTED?"accept":e===l.q.REQUESTED?"pending":e===l.q.CANCELLED||e===l.q.CANCELLED?"reject":e===l.q.COMPLETED?"accept":""}navigateToPayment(){this.studentSchedulesService.updateSelectedScheduleDetails(this.scheduleDetails),this.studentSchedulesService.updateAmount(this.scheduleDetails.amount),this.router.navigate(["/payment-page"])}updateSchedule(e){const i={student:this.scheduleDetails.student[0]._id,tutor:this.tutorDetails.userId,status:e};this.modalRef=this.modalService.show(r.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Are you sure want to change status to ${e} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateSchedule(this.scheduleDetails._id,i).subscribe(d=>{this.toastrService.success(d.message),this.getSchedulesDetailsByScheduleId()},d=>{this.toastrService.error(d.error.message??"unable to update! Please try again later")})})}acceptSchedule(e){const i={id:this.scheduleDetails._id,amount:this.totalAmountTobePaid};this.modalRef=this.modalService.show(r.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Processed with Accepting the schedule with $${this.totalAmountTobePaid} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateAcceptStatus(i).subscribe(d=>{this.toastrService.success(d.message),this.getSchedulesDetailsByScheduleId()},d=>{this.toastrService.error(d.error.message??"unable to update! Please try again later")})})}navigateToBackPages(e){this.router.navigate([`/${this.logedinUserRole}/${e}`])}calculateTotalAmount(){let e=0;for(let i=0;i<this.slots.length;i++)e+=(this.slots[i].to-this.slots[i].from)/2*this.tutorDetails.hourlyRate;this.totalAmountTobePaid=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u.F0),t.Y36(u.gz),t.Y36(_.F),t.Y36(f.g),t.Y36(S._W),t.Y36(T.tT),t.Y36(_.F),t.Y36(D.V))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-schedule-details"]],decls:39,vars:7,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item","cursor"],[3,"click"],[1,"breadcrumb-item","active"],[1,"card","mb-2"],[1,"content","mx-2"],[1,"card"],[1,"card-body"],[1,"mentor-widget"],[1,"user-info-left","align-items-center"],[1,"mentor-img","d-flex","flex-wrap","justify-content-center"],[1,"pro-avatar"],["class","user-info-cont",4,"ngIf"],["class","user-info-right d-flex align-items-end flex-wrap",4,"ngIf"],["class","card",4,"ngIf"],[1,"card-header"],[1,"widget-title"],["class","d-flex wrap ",4,"ngIf"],[1,"card-body","custom-border-card","pb-0"],["class","widget about-widget custom-about mb-0",4,"ngIf"],[1,"user-info-cont"],[1,"usr-name"],["class","mentor-type",4,"ngIf"],[1,"mentor-type"],["class","mentor-action",4,"ngIf"],[1,"mentor-action"],[1,"mentor-type","social-title"],[1,"mentor-details","m-0"],[1,"user-location","m-0"],[1,"fas","fa-map-marker-alt"],[1,"user-info-right","d-flex","align-items-end","flex-wrap"],["class","hireme-btn text-center",4,"ngIf"],[1,"hireme-btn","text-center"],[1,"hire-rate","mt-2"],[1,"d-flex","justify-content-between"],["inputId","integeronly",3,"ngModel","ngModelChange"],[4,"ngIf"],["pButton","","type","button","label","Accept",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Reject",1,"p-button","p-button-danger","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","p-button-danger","m-1",3,"click"],[2,"color","green"],["pButton","","pRipple","","type","button","label","Procced To Payment","class","p-button-sm p-button-raised p-button-success m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Cancel Schedule","class","p-button-sm p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Request Schedule","class","p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Procced To Payment",1,"p-button-sm","p-button-raised","p-button-success","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Cancel Schedule",1,"p-button-sm","p-button-warning","p-button","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Request Schedule",1,"p-button-warning","p-button","m-1",3,"click"],[1,"d-flex","wrap"],["class","accept m-1 p-2",4,"ngFor","ngForOf"],[1,"accept","m-1","p-2"],[1,"widget","about-widget","custom-about","mb-0"],[4,"ngFor","ngForOf"],[1,"mb-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedules"),t.qZA(),t.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),t.NdJ("click",function(){return i.navigateToBackPages("dashboard")}),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5)(10,"a",6),t.NdJ("click",function(){return i.navigateToBackPages("schedules")}),t._uU(11,"Schedules"),t.qZA()(),t.TgZ(12,"li",7),t._uU(13,"Schedule Details"),t.qZA()()()()(),t.TgZ(14,"div",8)(15,"div",9)(16,"div")(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15),t._uU(23,"KT"),t.qZA()(),t.YNc(24,E,8,6,"div",16),t.qZA(),t.YNc(25,I,2,1,"div",17),t.YNc(26,N,3,3,"div",17),t.qZA()()(),t.TgZ(27,"div"),t.YNc(28,L,14,4,"div",18),t.YNc(29,k,15,4,"div",18),t.qZA(),t.TgZ(30,"div",10)(31,"div",19)(32,"h4",20),t._uU(33,"Slot Details"),t.qZA()(),t.TgZ(34,"div",11),t.YNc(35,Y,2,1,"div",21),t.qZA()(),t.TgZ(36,"div",8)(37,"div",22),t.YNc(38,O,5,1,"div",23),t.qZA()()()()()),2&e&&(t.xp6(24),t.Q6J("ngIf",i.displayDetails),t.xp6(1),t.Q6J("ngIf",!i.isTutor),t.xp6(1),t.Q6J("ngIf",i.isTutor&&i.scheduleDetails),t.xp6(2),t.Q6J("ngIf",i.isTutor),t.xp6(1),t.Q6J("ngIf",!i.isTutor),t.xp6(6),t.Q6J("ngIf",i.scheduleDetails),t.xp6(3),t.Q6J("ngIf",i.scheduleDetails))},dependencies:[m.sg,m.O5,v.JJ,v.On,b.Hq,x.Rn,m.uU],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}"]}),s})()},4946:(g,p,c)=>{c.d(p,{g:()=>h});var r=c(4650);let h=(()=>{class a{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(t){this.selectedScheduleDetails=t}updateAmount(t){this.amountToBePaid=t}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);