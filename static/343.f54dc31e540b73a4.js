"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[343],{4343:(v,r,o)=>{o.d(r,{B:()=>V});var d=o(2887),p=o(7914),c=(()=>{return(i=c||(c={})).STUDENT="Student",i.TUTOR="Tutor",i.ADMIN="Admin",c;var i})(),u=o(5622),t=o(4650),_=o(2912),m=o(6864),f=o(4946),T=o(7185),D=o(9886),x=o(791),S=o(792),h=o(6895),g=o(4006),b=o(5593),Z=o(5047);function C(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ul",21)(1,"li",22)(2,"a",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateToBackPages("dashboard"))}),t._uU(3,"Dashboard"),t.qZA()(),t.TgZ(4,"li",22)(5,"a",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateToBackPages("schedules"))}),t._uU(6,"Schedules"),t.qZA()(),t.TgZ(7,"li",24),t._uU(8,"Schedule Details"),t.qZA()()}}function A(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"ul",21)(1,"li",22)(2,"a",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateToBackPages("dashboard"))}),t._uU(3,"Dashboard"),t.qZA()(),t.TgZ(4,"li",22)(5,"a",23),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.navigateToPayouts("payout"))}),t._uU(6,"Payouts"),t.qZA()(),t.TgZ(7,"li",24),t._uU(8,"Schedule Details"),t.qZA()()}}function E(i,l){if(1&i&&(t.TgZ(0,"p",28),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tutorDetails.title," ")}}function y(i,l){if(1&i&&(t.TgZ(0,"p",28),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tutorDetails.description," ")}}function U(i,l){if(1&i&&(t.TgZ(0,"div",30)(1,"p",31),t._uU(2,"Contact Address"),t.qZA(),t.TgZ(3,"div",32)(4,"p",33),t._UZ(5,"i",34),t._uU(6),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.tutorDetails.address," ")}}function N(i,l){if(1&i&&(t.TgZ(0,"div",25)(1,"h4",26),t._uU(2),t.qZA(),t.YNc(3,E,2,1,"p",27),t.YNc(4,y,2,1,"p",27),t.TgZ(5,"p",28),t._uU(6),t.qZA(),t.YNc(7,U,7,1,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.AsE(" ",e.displayDetails.firstName," ",e.displayDetails.lastName," "),t.xp6(1),t.Q6J("ngIf","student"===e.logedinUserRole),t.xp6(1),t.Q6J("ngIf","student"===e.logedinUserRole),t.xp6(2),t.hij(" ",e.displayDetails.email," "),t.xp6(1),t.Q6J("ngIf",e.isTutor||"admin"===e.logedinUserRole)}}function I(i,l){if(1&i&&(t.TgZ(0,"div",37)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"span",38),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.Tol(e.statusClass(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.hij(" ",null==e.scheduleDetails?null:e.scheduleDetails.status," "),t.xp6(2),t.hij("$",e.tutorDetails.hourlyRate," / Hour")}}function q(i,l){if(1&i&&(t.TgZ(0,"div",35),t.YNc(1,I,5,4,"div",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.scheduleDetails)}}function J(i,l){if(1&i&&(t.TgZ(0,"div",35)(1,"h3"),t._uU(2),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Tol(e.statusClass(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.hij(" ",null==e.scheduleDetails?null:e.scheduleDetails.status," ")}}function P(i,l){if(1&i&&(t.TgZ(0,"div",35)(1,"h4",39),t._uU(2,"Total Amount Be Paid"),t.qZA(),t.TgZ(3,"h1",40),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij("$ ",e.totalAmountTobePaid,"")}}function R(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"Total Amount"),t.qZA(),t.TgZ(3,"p-inputNumber",43),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw(2);return t.KtG(a.totalAmountTobePaid=n)}),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(3),t.Q6J("ngModel",e.totalAmountTobePaid)}}function w(i,l){if(1&i&&(t.TgZ(0,"div")(1,"h4"),t._uU(2,"Total Amount To be Paid"),t.qZA(),t.TgZ(3,"h3",44),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij("$",e.scheduleDetails.amount?e.scheduleDetails.amount:e.totalAmountTobePaid,"")}}function k(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function L(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.TgZ(2,"button",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function Y(i,l){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.BQk()}}function Q(i,l){if(1&i&&(t.TgZ(0,"div",7)(1,"div",16)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",8)(5,"div",41),t.YNc(6,R,4,1,"div",42),t.YNc(7,w,5,1,"div",42),t.TgZ(8,"div"),t.YNc(9,k,3,0,"ng-container",42),t.YNc(10,L,3,0,"ng-container",42),t.YNc(11,Y,3,0,"ng-container",42),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.statusList.REQUESTED===(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.Q6J("ngIf",e.statusList.REQUESTED!==(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(2),t.Q6J("ngIf",e.statusList.REQUESTED===(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.Q6J("ngIf",e.statusList.ACCEPTED===(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.Q6J("ngIf",e.statusList.REJECTED===(null==e.scheduleDetails?null:e.scheduleDetails.status))}}function M(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.navigateToPayment())}),t.qZA()}}function B(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA()}}function F(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REQUESTED))}),t.qZA()}}function O(i,l){if(1&i&&(t.TgZ(0,"div",7)(1,"div",16)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",8)(5,"div",41)(6,"div")(7,"h4"),t._uU(8,"Total Amount To be Paid"),t.qZA(),t.TgZ(9,"h3",44),t._uU(10),t.qZA()(),t.TgZ(11,"div"),t.YNc(12,M,1,0,"button",49),t.YNc(13,B,1,0,"button",50),t.YNc(14,F,1,0,"button",51),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(10),t.hij("$",e.scheduleDetails.amount?e.scheduleDetails.amount:e.totalAmountTobePaid,""),t.xp6(2),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)===e.statusList.ACCEPTED),t.xp6(1),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)!==e.statusList.CANCELLED),t.xp6(1),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)===e.statusList.CANCELLED)}}function j(i,l){if(1&i&&(t.TgZ(0,"div",57)(1,"div")(2,"h5"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()),2&i){const e=l.$implicit,s=t.oxw(2);t.xp6(3),t.Oqu(t.xi3(4,3,e.date,"MMM d, y")),t.xp6(3),t.AsE("",s.timeValues[e.from]," - ",s.timeValues[e.to],"")}}function H(i,l){if(1&i&&(t.TgZ(0,"div",55),t.YNc(1,j,7,6,"div",56),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.scheduleDetails.slots)}}function K(i,l){1&i&&t._UZ(0,"hr")}function $(i,l){if(1&i&&(t.TgZ(0,"div")(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"p",60),t._uU(4),t.qZA(),t.YNc(5,K,1,0,"hr",42),t.qZA()),2&i){const e=l.$implicit,s=l.last;t.xp6(2),t.Oqu(e.courseName),t.xp6(2),t.Oqu(e.courseDiscription),t.xp6(1),t.Q6J("ngIf",!s)}}function G(i,l){if(1&i&&(t.TgZ(0,"div",58)(1,"h4",17),t._uU(2,"Course Details"),t.qZA(),t._UZ(3,"hr"),t.YNc(4,$,6,3,"div",59),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.scheduleDetails.subjects)}}let V=(()=>{class i{constructor(e,s,n,a,z,W,X,tt,et){this.router=e,this.activatedRoute=s,this.sharedSchedulesService=n,this.studentSchedulesService=a,this.toastrService=z,this.modalService=W,this.SchedulesService=X,this.storageService=tt,this.sharedService=et,this.scheduleId="",this.timeValues=p.a,this.statusList=u.q,this.logedinUserRole="tutor",this.isTutor=!1,this.slots=[],this.totalAmountTobePaid=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("role");this.logedinUserRole=e===c.TUTOR?"tutor":e===c.ADMIN?"admin":"student",this.isTutor=e===c.TUTOR,this.activatedRoute.queryParams.subscribe(s=>{this.scheduleId=s.sid}),this.scheduleId&&""!==this.scheduleId&&this.getSchedulesDetailsByScheduleId()}getSchedulesDetailsByScheduleId(){this.sharedSchedulesService.getSchedulesByScheduleId(this.scheduleId).subscribe(e=>{this.scheduleDetails=e?.schedule,this.tutorDetails=e?.schedule?.tutor[0],this.tutorId=this.tutorDetails._id,this.displayDetails="student"===this.logedinUserRole?e?.schedule?.tutor[0]:e?.schedule?.student[0],this.slots=e?.schedule?.slots,this.calculateTotalAmount()})}statusClass(e){return e===u.q.ACCEPTED?"confirm":e===u.q.REQUESTED?"pending":e===u.q.CANCELLED||e===u.q.CANCELLED?"reject":e===u.q.COMPLETED||e===u.q.CONFIRMED?"accept":""}navigateToPayment(){this.studentSchedulesService.updateSelectedScheduleDetails(this.scheduleDetails),this.studentSchedulesService.updateAmount(this.scheduleDetails.amount),this.router.navigate(["/payment-page"])}updateSchedule(e){const s={student:this.scheduleDetails.student[0]._id,tutor:this.tutorDetails.userId,status:e};this.modalRef=this.modalService.show(d.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Are you sure want to change status to ${e} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateSchedule(this.scheduleDetails._id,s).subscribe(a=>{this.toastrService.success(a.message),this.getSchedulesDetailsByScheduleId()},a=>{this.toastrService.error(a.error.message??"unable to update! Please try again later")})})}acceptSchedule(e){const s={id:this.scheduleDetails._id,amount:this.totalAmountTobePaid};this.modalRef=this.modalService.show(d.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Processed with Accepting the schedule with $${this.totalAmountTobePaid} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateAcceptStatus(s).subscribe(a=>{this.toastrService.success(a.message),this.getSchedulesDetailsByScheduleId()},a=>{this.toastrService.error(a.error.message??"unable to update! Please try again later")})})}navigateToBackPages(e){this.router.navigate([`/${this.logedinUserRole}/${e}`])}calculateTotalAmount(){let e=0;for(let s=0;s<this.slots.length;s++)e+=(this.slots[s].to-this.slots[s].from)/2*this.tutorDetails.hourlyRate;this.totalAmountTobePaid=e}navigateToPayouts(e){this.router.navigate([`/${this.logedinUserRole}/${e}`])}editSchedule(){this.router.navigate(["./student/courses/schedule"],{queryParams:{id:this.tutorId,sid:this.scheduleDetails._id}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(_.F0),t.Y36(_.gz),t.Y36(m.F),t.Y36(f.g),t.Y36(T._W),t.Y36(D.tT),t.Y36(m.F),t.Y36(x.V),t.Y36(S.F))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-schedule-details"]],decls:33,vars:11,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],["class","breadcrumb",4,"ngIf"],[1,"card","mb-2"],[1,"content","mx-2"],[1,"card"],[1,"card-body"],[1,"mentor-widget"],[1,"user-info-left","align-items-center"],[1,"mentor-img","d-flex","flex-wrap","justify-content-center"],[1,"pro-avatar"],["class","user-info-cont",4,"ngIf"],["class","user-info-right d-flex align-items-end flex-wrap",4,"ngIf"],["class","card",4,"ngIf"],[1,"card-header"],[1,"widget-title"],["class","d-flex wrap",4,"ngIf"],[1,"card-body","custom-border-card","pb-0"],["class","widget about-widget custom-about mb-0",4,"ngIf"],[1,"breadcrumb"],[1,"breadcrumb-item","cursor"],[3,"click"],[1,"breadcrumb-item","active"],[1,"user-info-cont"],[1,"usr-name"],["class","mentor-type",4,"ngIf"],[1,"mentor-type"],["class","mentor-action",4,"ngIf"],[1,"mentor-action"],[1,"mentor-type","social-title"],[1,"mentor-details","m-0"],[1,"user-location","m-0"],[1,"fas","fa-map-marker-alt"],[1,"user-info-right","d-flex","align-items-end","flex-wrap"],["class","hireme-btn text-center",4,"ngIf"],[1,"hireme-btn","text-center"],[1,"hire-rate","mt-2"],[1,"label-color"],[1,"total-amount"],[1,"d-flex","justify-content-between"],[4,"ngIf"],["inputId","integeronly",3,"ngModel","ngModelChange"],[2,"color","green"],["pButton","","type","button","label","Accept",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Reject",1,"p-button","p-button-danger","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","p-button-danger","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Procced To Payment","class","p-button-sm p-button-raised p-button-success m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Cancel Schedule","class","p-button-sm p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Request Schedule","class","p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Procced To Payment",1,"p-button-sm","p-button-raised","p-button-success","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Cancel Schedule",1,"p-button-sm","p-button-warning","p-button","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Request Schedule",1,"p-button-warning","p-button","m-1",3,"click"],[1,"d-flex","wrap"],["class","accept m-1 p-2",4,"ngFor","ngForOf"],[1,"accept","m-1","p-2"],[1,"widget","about-widget","custom-about","mb-0"],[4,"ngFor","ngForOf"],[1,"mb-2"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedule Details"),t.qZA(),t.YNc(5,C,9,0,"ul",4),t.YNc(6,A,9,0,"ul",4),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div")(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12),t._uU(16),t.qZA()(),t.YNc(17,N,8,6,"div",13),t.qZA(),t.YNc(18,q,2,1,"div",14),t.YNc(19,J,3,3,"div",14),t.YNc(20,P,5,1,"div",14),t.qZA()()(),t.TgZ(21,"div"),t.YNc(22,Q,12,5,"div",15),t.YNc(23,O,15,4,"div",15),t.qZA(),t.TgZ(24,"div",7)(25,"div",16)(26,"h4",17),t._uU(27,"Slot Details"),t.qZA()(),t.TgZ(28,"div",8),t.YNc(29,H,2,1,"div",18),t.qZA()(),t.TgZ(30,"div",5)(31,"div",19),t.YNc(32,G,5,1,"div",20),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("ngIf","admin"!==s.logedinUserRole),t.xp6(1),t.Q6J("ngIf","admin"===s.logedinUserRole),t.xp6(10),t.hij(" ",s.sharedService.getNameInitials(null==s.displayDetails?null:s.displayDetails.firstName,null==s.displayDetails?null:s.displayDetails.lastName)," "),t.xp6(1),t.Q6J("ngIf",s.displayDetails),t.xp6(1),t.Q6J("ngIf","student"===s.logedinUserRole),t.xp6(1),t.Q6J("ngIf",s.isTutor&&s.scheduleDetails),t.xp6(1),t.Q6J("ngIf","admin"===s.logedinUserRole),t.xp6(2),t.Q6J("ngIf",s.isTutor),t.xp6(1),t.Q6J("ngIf","student"===s.logedinUserRole),t.xp6(6),t.Q6J("ngIf",s.scheduleDetails),t.xp6(3),t.Q6J("ngIf",s.scheduleDetails))},dependencies:[h.sg,h.O5,g.JJ,g.On,b.Hq,Z.Rn,h.uU],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}.label-color[_ngcontent-%COMP%]{color:gray}.total-amount[_ngcontent-%COMP%]{color:#0a4d0a}"]}),i})()},4946:(v,r,o)=>{o.d(r,{g:()=>p});var d=o(4650);let p=(()=>{class c{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(t){this.selectedScheduleDetails=t}updateAmount(t){this.amountToBePaid=t}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);