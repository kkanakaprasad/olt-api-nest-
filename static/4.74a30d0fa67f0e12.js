"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[4],{8408:(V,m,s)=>{s.r(m),s.d(m,{TutorSchedulesModule:()=>z});var p=s(6895),h=s(2912),f=s(4343),Z=s(2887),A=s(7914),n=s(5622),t=s(4650),C=s(6864),r=s(433),y=s(791),b=s(7185),U=s(9886),g=s(8396),x=s(805),v=s(585),S=s(5593),T=s(5722);function L(o,l){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Student "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Subjects "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Slots"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Status"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Actions"),t.qZA()())}function F(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.courseName)}}function N(o,l){if(1&o&&(t.TgZ(0,"div",36)(1,"div")(2,"h5"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()),2&o){const e=l.$implicit,a=t.oxw(2);t.xp6(3),t.hij("",t.xi3(4,3,e.date,"MMM d, y")," "),t.xp6(3),t.AsE("",a.timeValues[e.from]," - ",a.timeValues[e.to],"")}}function D(o,l){if(1&o&&(t.TgZ(0,"div",37)(1,"h5"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4,"slots"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij("+ ",e.slots.length-3," ")}}function J(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,F,2,1,"p",30),t.qZA(),t.TgZ(5,"td",31),t.YNc(6,N,7,6,"div",32),t.YNc(7,D,5,1,"div",33),t.qZA(),t.TgZ(8,"td")(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"td")(12,"button",34),t.NdJ("click",function(){const i=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.navigateToDetailsPage(i._id))}),t._uU(13,"View Details "),t._UZ(14,"i",35),t.qZA()()()}if(2&o){const e=l.$implicit,a=t.oxw();t.xp6(2),t.AsE("",e.student.firstName," ",e.student.lastName,""),t.xp6(2),t.Q6J("ngForOf",e.subjects),t.xp6(2),t.Q6J("ngForOf",null==e.slots?null:e.slots.slice(0,3)),t.xp6(1),t.Q6J("ngIf",(null==e.slots?null:e.slots.length)>3),t.xp6(2),t.Tol(a.statusClass(e.status)),t.xp6(1),t.Oqu(e.status)}}function E(o,l){1&o&&(t.TgZ(0,"div"),t._uU(1," No Schedules found "),t.qZA())}const q=function(){return[10,25,50]},R=[{path:"",component:(()=>{class o{constructor(e,a,u,i,c,d){this.tutorSchedulesService=e,this.formBuilder=a,this.storageService=u,this.toastrService=i,this.modalService=c,this.router=d,this.timeValues=A.a,this.scheduleTableData=[],this.statusList=n.q,this.courses=[],this.dispalyStatusList=n.s,this.scheduleTableDataLength=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("id");this.getAllCourses(),this.genrateFiltersForm(),this.payload={pageNumber:0,pageSize:10,sortField:"date",sortOrder:1,tutorIds:[e],...this.filtersForm.value},this.getSchedules()}getSchedules(){this.tutorSchedulesService.getSchedulesBySearchByCriteria(this.payload).subscribe(e=>{this.scheduleTableData=e.data,this.scheduleTableDataLength=e.totalCount})}genrateFiltersForm(){this.filtersForm=this.formBuilder.group({studentIds:[[]],subjects:[[]],dateRange:[[]],status:[[]]})}clear(e){e.clear()}getAllCourses(){this.tutorSchedulesService.getAllCourses().subscribe(e=>{this.courses=e.data})}applyFilters(){this.payload={...this.payload,...this.filtersForm.value},this.getSchedules()}paginate(e){this.payload={...this.payload,pageNumber:e.firxt,pageSize:e.row},this.getSchedules()}updateSchedule(e,a){const u={...a,status:e};"CANCELLED"===e||"REJECTED"===e?(this.modalRef=this.modalService.show(Z.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:"Are you sure want to "+("CANCELLED"===e?"cancel?":"reject?")}}),this.modalRef.content.onClose.subscribe(c=>{c&&this.tutorSchedulesService.updateSchedule(a._id,u).subscribe(d=>{this.toastrService.success(d.message),this.getSchedules()},d=>{this.toastrService.error(d.message??"unable to update! Please try again later")})})):this.tutorSchedulesService.updateSchedule(a._id,u).subscribe(i=>{this.toastrService.success(i.message),this.getSchedules()},i=>{this.toastrService.error(i.message??"unable to update! Please try again later")})}statusClass(e){return e===n.q.ACCEPTED?"accept":e===n.q.REQUESTED?"pending":e===n.q.CANCELLED||e===n.q.CANCELLED?"reject":e===n.q.COMPLETED?"accept":""}navigateToDetailsPage(e){this.router.navigate(["./tutor/schedules/details"],{queryParams:{sid:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.F),t.Y36(r.qu),t.Y36(y.V),t.Y36(b._W),t.Y36(U.tT),t.Y36(h.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tutor-schedules"]],decls:51,vars:14,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"card"],[1,"content"],[1,"col-md-12","col-lg-4","col-xl-3","theiaStickySidebar"],[1,"card","search-filter"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup"],[1,"filter-widget"],["defaultLabel","Tutor Id","optionLabel","tutor._id","display","chip","optionValue","tutor._id",1,"m-1",3,"options"],["defaultLabel","Select a Courses","optionLabel","courseName","display","chip","formControlName","subjects","optionValue","courseName",1,"m-1",3,"options"],["placeholder","Select Date","formControlName","dateRange","inputId","icon","dateFormat","yy-mm-dd",1,"m-1",3,"showIcon"],[1,""],["placeholder","Select Status","optionLabel","value","optionValue","value","display","chip","autoWidth","true","formControlName","status",1,"m-1",3,"options"],[1,"btn-search"],["type","button",1,"btn","w-100",3,"click"],[1,"col-md-12","col-lg-8","col-xl-9"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","showCurrentPageReport","rowsPerPageOptions","paginator","rows","totalRecords","onLazyLoad"],["dt1",""],["pTemplate","header"],["pTemplate","body"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"d-flex","wrap"],["class"," m-1 p-2 accept",4,"ngFor","ngForOf"],["class","accept m-1 p-2",4,"ngIf"],["pButton","","pRipple","",1,"p-button-text",3,"click"],[1,"pi","pi-chevron-right","m-1"],[1,"m-1","p-2","accept"],[1,"accept","m-1","p-2"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedules"),t.qZA(),t.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",7),t._uU(10,"Schedules"),t.qZA()()()()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div")(14,"div",1)(15,"div",10)(16,"div",11)(17,"div",12)(18,"h4",13),t._uU(19,"Search Filter"),t.qZA()(),t.TgZ(20,"div",14)(21,"form",15)(22,"div",16)(23,"h4"),t._uU(24,"Tutor"),t.qZA(),t.TgZ(25,"div"),t._UZ(26,"p-multiSelect",17),t.qZA()(),t.TgZ(27,"div",16)(28,"h4"),t._uU(29,"Course"),t.qZA(),t.TgZ(30,"div"),t._UZ(31,"p-multiSelect",18),t.qZA()(),t.TgZ(32,"div",16)(33,"h4"),t._uU(34,"Date"),t.qZA(),t.TgZ(35,"div"),t._UZ(36,"p-calendar",19),t.qZA()(),t.TgZ(37,"div",16)(38,"h4"),t._uU(39,"Status"),t.qZA(),t.TgZ(40,"div",20),t._UZ(41,"p-multiSelect",21),t.qZA()(),t.TgZ(42,"div",22)(43,"button",23),t.NdJ("click",function(){return a.applyFilters()}),t._uU(44,"Search"),t.qZA()()()()()(),t.TgZ(45,"div",24)(46,"p-table",25,26),t.NdJ("onLazyLoad",function(i){return a.paginate(i)}),t.YNc(48,L,11,0,"ng-template",27),t.YNc(49,J,15,8,"ng-template",28),t.qZA(),t.YNc(50,E,2,0,"div",29),t.qZA()()()()()),2&e&&(t.xp6(7),t.Q6J("routerLink","/tutor/dashboard"),t.xp6(14),t.Q6J("formGroup",a.filtersForm),t.xp6(5),t.Q6J("options",a.scheduleTableData),t.xp6(5),t.Q6J("options",a.courses),t.xp6(5),t.Q6J("showIcon",!0),t.xp6(5),t.Q6J("options",a.dispalyStatusList),t.xp6(5),t.Q6J("value",a.scheduleTableData)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(13,q))("paginator",!0)("rows",10)("totalRecords",a.scheduleTableDataLength),t.xp6(4),t.Q6J("ngIf",0==a.scheduleTableData.length))},dependencies:[p.sg,p.O5,h.yS,g.iA,x.jx,v.f,S.Hq,T.NU,r._Y,r.JJ,r.JL,r.sg,r.u,p.uU]}),o})()},{path:"details",component:f.B}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(R),h.Bz]}),o})();var M=s(2210),P=s(1740),Y=s(8177),I=s(8235),O=s(4076),Q=s(1493),B=s(1997);let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,j,g.U$,v._8,Y.JH,Q.S,T.q4,O.vI,M.kW,S.hJ,P.j,I.q,r.u5,r.UX,B.U]}),o})()}}]);