"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[408],{8408:(k,p,u)=>{u.r(p),u.d(p,{TutorSchedulesModule:()=>Y});var r=u(6895),i=u(451),T=u(7914),d=u(5622),t=u(4650),S=u(6864),a=u(433),f=u(791),C=u(7185),m=u(8396),x=u(805),g=u(585),h=u(5593),_=u(5722);function Z(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"form",14),t._UZ(1,"p-multiSelect",15)(2,"p-multiSelect",16)(3,"p-calendar",17)(4,"p-multiSelect",18),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.applyFilters())}),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.filtersForm),t.xp6(1),t.Q6J("options",e.scheduleTableData),t.xp6(1),t.Q6J("options",e.courses),t.xp6(1),t.Q6J("showIcon",!0),t.xp6(1),t.Q6J("options",e.dispalyStatusList)}}function b(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2," No Schedules found "),t.qZA()()),2&o){const e=c.$implicit;t.xp6(1),t.uIk("colspan",e.length)}}function A(o,c){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Student Id "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Subjects "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Date"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Start Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"End Time"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Actions"),t.qZA()())}function y(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.xp6(1),t.Oqu(e.courseName)}}function v(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.ACCEPTED,l))}),t.qZA(),t.TgZ(2,"button",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.REJECTED,l))}),t.qZA(),t.BQk()}}function L(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",24),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.CANCELLED,l))}),t.qZA(),t.TgZ(2,"button",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.REJECTED,l))}),t.qZA(),t.BQk()}}function E(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.ACCEPTED,l))}),t.qZA(),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.CANCELLED,l))}),t.qZA(),t.BQk()}}function J(o,c){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.ACCEPTED,l))}),t.qZA(),t.TgZ(2,"button",23),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,n=t.oxw();return t.KtG(n.updateSchedule(n.statusList.REJECTED,l))}),t.qZA(),t.BQk()}}function N(o,c){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,y,2,1,"p",20),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,v,3,0,"ng-container",21),t.YNc(15,L,3,0,"ng-container",21),t.YNc(16,E,3,0,"ng-container",21),t.YNc(17,J,3,0,"ng-container",21),t.qZA()()),2&o){const e=c.$implicit,s=t.oxw();t.xp6(2),t.Oqu(e.student._id),t.xp6(2),t.Q6J("ngForOf",e.subjects),t.xp6(2),t.Oqu(e.date),t.xp6(2),t.Oqu(s.timeValues[e.from]),t.xp6(2),t.Oqu(s.timeValues[e.to]),t.xp6(2),t.Oqu(e.status),t.xp6(2),t.Q6J("ngIf",s.statusList.REQUESTED===e.status),t.xp6(1),t.Q6J("ngIf",s.statusList.ACCEPTED===e.status),t.xp6(1),t.Q6J("ngIf",s.statusList.REJECTED===e.status),t.xp6(1),t.Q6J("ngIf",s.statusList.CANCELLED===e.status)}}const F=function(){return[10,25,50]},D=[{path:"",component:(()=>{class o{constructor(e,s,l,n){this.tutorSchedulesService=e,this.formBuilder=s,this.storageService=l,this.toastrService=n,this.timeValues=T.a,this.scheduleTableData=[],this.statusList=d.q,this.courses=[],this.dispalyStatusList=d.s,this.scheduleTableDataLength=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("id");this.getAllCourses(),this.genrateFiltersForm(),this.payload={pageNumber:0,pageSize:10,sortField:"date",sortOrder:1,tutorIds:[e],...this.filtersForm.value},this.getSchedules()}getSchedules(){this.tutorSchedulesService.getSchedulesBySearchByCriteria(this.payload).subscribe(e=>{console.log(e),this.scheduleTableData=e.data,this.scheduleTableDataLength=e.totalCount},e=>{console.log(e)})}genrateFiltersForm(){this.filtersForm=this.formBuilder.group({studentIds:[[]],subjects:[[]],dateRange:[[]],status:[[]]})}clear(e){e.clear()}getAllCourses(){this.tutorSchedulesService.getAllCourses().subscribe(e=>{console.log(e),this.courses=e.data})}applyFilters(){this.payload={...this.payload,...this.filtersForm.value},this.getSchedules()}paginate(e){console.log(e),this.payload={...this.payload,pageNumber:e.firxt,pageSize:e.row},this.getSchedules()}updateSchedule(e,s){const l={...s,status:e};this.tutorSchedulesService.updateSchedule(s._id,l).subscribe(n=>{this.toastrService.success(n.message),this.getSchedules()},n=>{this.toastrService.error(n.message??"unable to update! Please try again later")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(S.F),t.Y36(a.qu),t.Y36(f.V),t.Y36(C._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tutor-schedules"]],decls:17,vars:8,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","showCurrentPageReport","rowsPerPageOptions","paginator","rows","totalRecords","onLazyLoad"],["dt1",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[3,"formGroup"],["defaultLabel","Student Id","optionLabel","student._id","display","chip","autoWidth","true","formControlName","studentIds","optionValue","student._id",1,"m-1",3,"options"],["defaultLabel","Select a Subjects","optionLabel","courseName","display","chip","autoWidth","true","formControlName","subjects","optionValue","courseName",1,"m-1",3,"options"],["placeholder","Select Date","formControlName","dateRange","inputId","icon","dateFormat","yy-mm-dd",1,"m-1",3,"showIcon"],["placeholder","Select Status","optionLabel","value","optionValue","value","display","chip","autoWidth","true","formControlName","status",1,"m-1",3,"options"],["pButton","","type","button","label","Apply Filters","type","button",1,"p-button-primary",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],["pButton","","type","button","label","Accept",1,"p-button-text","m-1",3,"click"],["pButton","","type","button","label","Reject",1,"p-button-text","p-button-danger","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button-text","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button-text","p-button-danger","m-1",3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedules"),t.qZA(),t.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",7),t._uU(10,"Schedules"),t.qZA()()()()(),t.TgZ(11,"p-table",8,9),t.NdJ("onLazyLoad",function(n){return s.paginate(n)}),t.YNc(13,Z,6,5,"ng-template",10),t.YNc(14,b,3,1,"ng-template",11),t.YNc(15,A,15,0,"ng-template",12),t.YNc(16,N,18,10,"ng-template",13),t.qZA()),2&e&&(t.xp6(7),t.Q6J("routerLink","/tutor/dashboard"),t.xp6(4),t.Q6J("value",s.scheduleTableData)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(7,F))("paginator",!0)("rows",10)("totalRecords",s.scheduleTableDataLength))},dependencies:[r.sg,r.O5,i.yS,m.iA,x.jx,g.f,h.Hq,_.NU,a._Y,a.JJ,a.JL,a.sg,a.u]}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[i.Bz.forChild(D),i.Bz]}),o})();var q=u(2210),B=u(1740),M=u(8177),Q=u(8235),R=u(4076),I=u(1493),w=u(1997);let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.ez,U,m.U$,g._8,M.JH,I.S,_.q4,R.vI,q.kW,h.hJ,B.j,Q.q,a.u5,a.UX,w.U]}),o})()}}]);