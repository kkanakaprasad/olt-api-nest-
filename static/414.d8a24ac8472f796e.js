"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[414],{5622:(m,d,s)=>{s.d(d,{q:()=>u,s:()=>r});var u=(()=>{return(i=u||(u={})).REQUESTED="REQUESTED",i.ACCEPTED="ACCEPTED",i.REJECTED="REJECTED",i.CANCELLED="CANCELLED",i.COMPLETED="COMPLETED",i.CONFIRMED="CONFIRMED",u;var i})();const r=[{value:"REQUESTED",label:"Requested"},{value:"ACCEPTED",label:"Accepted"},{value:"REJECTED",label:"Rejected"},{value:"CANCELLED",label:"Cancelled"},{value:"COMPLETED",label:"Completed"},{value:"CONFIRMED",label:"Confirmed"}]},414:(m,d,s)=>{s.r(d),s.d(d,{PaymentPageModule:()=>Z});var u=s(6895),r=s(2912),i=s(5622),e=s(4650),l=s(4946),P=s(7185),h=s(6557);let v=(()=>{class a{constructor(t){this.httpDataService=t}postPayment(t){return this.httpDataService.post("payments/updatePayment",t)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(h.L))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var g=s(5861);const f=["paypal"];let S=(()=>{class a{constructor(t){this.studentSchedulesService=t,this.isPaymentSuccess=new e.vpe,this.amountToPaid=0,this.amountToPaid=this.studentSchedulesService.amountToBePaid,this.paymentDetails=this.studentSchedulesService.selectedScheduleDetails,this.payerDetails=this.paymentDetails?.student[0],this.tutorDetails=this.paymentDetails?.tutor[0]}ngOnInit(){var n,t=this;paypal.Buttons({createOrder:(n,c)=>c.order.create({purchase_units:[{amount:{currency_code:"USD",value:this.amountToPaid}}]}),onApprove:(n=(0,g.Z)(function*(c,p){const y=yield p.order.capture();t.isPaymentSuccess.emit(y)}),function(p,y){return n.apply(this,arguments)}),onError:n=>{console.log(n)}}).render(this.paypalElement.nativeElement)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.g))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-paypal-payment-page"]],viewQuery:function(t,n){if(1&t&&e.Gf(f,7),2&t){let c;e.iGM(c=e.CRH())&&(n.paypalElement=c.first)}},outputs:{isPaymentSuccess:"isPaymentSuccess"},decls:4,vars:0,consts:[[1,"payment-div"],[1,"payment-inner-div"],["paypal",""]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"div",1,2),e.qZA()())},styles:[".payment-div[_ngcontent-%COMP%]{display:flex;justify-content:center}.payment-inner-div[_ngcontent-%COMP%]{min-width:500px}"]}),a})();function T(a,o){if(1&a&&(e.TgZ(0,"div",17)(1,"ul",18)(2,"li")(3,"div",19)(4,"div",11)(5,"span"),e._uU(6,"Full Name"),e.qZA(),e.TgZ(7,"div",12),e._uU(8),e.qZA()()()(),e.TgZ(9,"li")(10,"div",19)(11,"div",11)(12,"span"),e._uU(13,"Email"),e.qZA(),e.TgZ(14,"div",12),e._uU(15),e.qZA()()()()()()),2&a){const t=e.oxw();e.xp6(8),e.AsE("",t.payerDetails.firstName," ",t.payerDetails.lastName,""),e.xp6(7),e.Oqu(t.payerDetails.email)}}function E(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"app-paypal-payment-page",20),e.NdJ("isPaymentSuccess",function(c){e.CHM(t);const p=e.oxw();return e.KtG(p.handleIsPaymentSuccess(c))}),e.qZA()()}}function C(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",21)(2,"div",9)(3,"div",22),e._UZ(4,"i",23),e.TgZ(5,"h3"),e._uU(6,"Appointment booked Successfully!"),e.qZA(),e.TgZ(7,"p"),e._uU(8,"Appointment booked with "),e.TgZ(9,"strong"),e._uU(10),e.qZA()(),e.TgZ(11,"p"),e._uU(12,"Ref Id "),e.TgZ(13,"strong"),e._uU(14),e.qZA()(),e.TgZ(15,"a",24),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.navigateToSchedules())}),e._uU(16,"Back to Schedules"),e.qZA()()()()()}if(2&a){const t=e.oxw();e.xp6(10),e.Oqu(t.tutorDetails.firstName),e.xp6(4),e.Oqu(t.successPaymentDetails.id)}}const D=[{path:"",component:(()=>{class a{constructor(t,n,c,p){this.router=t,this.studentSchedulesService=n,this.toastrService=c,this.paymentPageService=p,this.amountToPaid=0,this.isPaymentSuccess=!1,this.amountToPaid=this.studentSchedulesService.amountToBePaid,this.paymentDetails=this.studentSchedulesService.selectedScheduleDetails,this.payerDetails=this.paymentDetails?.student[0],this.tutorDetails=this.paymentDetails?.tutor[0]}ngOnInit(){}handleIsPaymentSuccess(t){"CONFIRMED"===t.status||"COMPLETED"===t.status?(this.paymentPageService.postPayment({scheduleIds:[this.paymentDetails?._id],paymentId:t.id,status:i.q.CONFIRMED,paymentInfo:t,amount:this.amountToPaid}).subscribe(c=>{this.toastrService.success("Thankyou! Payment Successfull")}),this.isPaymentSuccess=!0,this.successPaymentDetails=t):this.toastrService.error("Sorry! Payment unsuccessfull Please try again")}navigateToSchedules(){this.router.navigate(["student/schedules"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(r.F0),e.Y36(l.g),e.Y36(P._W),e.Y36(v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payment-page"]],decls:29,vars:6,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"experience-content","mb-3"],[1,"timeline-content"],[1,"row-result"],[1,"widget","experience-widget","mb-2"],[1,"widget-title"],["class","experience-box",4,"ngIf"],[4,"ngIf"],[1,"experience-box"],[1,"experience-list","profile-custom-list"],[1,"experience-content"],[3,"isPaymentSuccess"],[1,"card","success-card"],[1,"success-cont"],[1,"fas","fa-check"],[1,"btn","btn-primary","view-inv-btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Payment"),e.qZA(),e.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),e._uU(8,"Dashboard"),e.qZA()(),e.TgZ(9,"li",5)(10,"a",6),e._uU(11,"Schedules"),e.qZA()(),e.TgZ(12,"li",7),e._uU(13,"Payment Page"),e.qZA()()()()(),e.TgZ(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"span"),e._uU(19,"Amount to be Paid"),e.qZA(),e.TgZ(20,"h4",12),e._uU(21),e.qZA()()(),e.TgZ(22,"div",13)(23,"h4",14),e._uU(24,"Payer Details"),e.qZA(),e._UZ(25,"hr"),e.YNc(26,T,16,3,"div",15),e.qZA()()(),e.YNc(27,E,2,0,"div",16),e.YNc(28,C,17,2,"div",16)),2&t&&(e.xp6(7),e.Q6J("routerLink","/student/dashboard"),e.xp6(3),e.Q6J("routerLink","/student/schedules"),e.xp6(11),e.hij("$ ",n.amountToPaid,""),e.xp6(5),e.Q6J("ngIf",n.payerDetails),e.xp6(1),e.Q6J("ngIf",!n.isPaymentSuccess),e.xp6(1),e.Q6J("ngIf",n.isPaymentSuccess))},dependencies:[u.O5,r.yS,S]}),a})()}];let _=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[r.Bz.forChild(D),r.Bz]}),a})(),Z=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.ez,_]}),a})()},4946:(m,d,s)=>{s.d(d,{g:()=>r});var u=s(4650);let r=(()=>{class i{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(l){this.selectedScheduleDetails=l}updateAmount(l){this.amountToBePaid=l}}return i.\u0275fac=function(l){return new(l||i)},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);