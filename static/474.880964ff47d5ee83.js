"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[474],{2474:(Y,d,s)=>{s.r(d),s.d(d,{StudentSchedulesModule:()=>M});var c=s(6895),i=s(451),T=s(7914),p=s(5622),t=s(4650),Z=s(6864),u=s(433),v=s(791),y=s(7185),m=s(8396),C=s(805),h=s(585),g=s(5593),S=s(5722);function b(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"form",14),t._UZ(1,"p-multiSelect",15)(2,"p-multiSelect",16)(3,"p-calendar",17)(4,"p-multiSelect",18),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.applyFilters())}),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.filtersForm),t.xp6(1),t.Q6J("options",e.scheduleTableData),t.xp6(1),t.Q6J("options",e.courses),t.xp6(1),t.Q6J("showIcon",!0),t.xp6(1),t.Q6J("options",e.dispalyStatusList)}}function A(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2," No Schedules found "),t.qZA()()),2&o){const e=a.$implicit;t.xp6(1),t.uIk("colspan",e.length)}}function x(o,a){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Tutor Id "),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Subjects "),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Date"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Start Time"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"End Time"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Status"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Actions"),t.qZA()())}function L(o,a){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Oqu(e.courseName)}}function F(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,L,2,1,"p",20),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"button",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.updateSchedule(f.statusList.CANCELLED,l))}),t.qZA()()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(2),t.Oqu(e.tutor._id),t.xp6(2),t.Q6J("ngForOf",e.subjects),t.xp6(2),t.Oqu(e.date),t.xp6(2),t.Oqu(n.timeValues[e.from]),t.xp6(2),t.Oqu(n.timeValues[e.to]),t.xp6(2),t.Oqu(e.status)}}const U=function(){return[10,25,50]},N=[{path:"",component:(()=>{class o{constructor(e,n,r,l){this.SchedulesService=e,this.formBuilder=n,this.storageService=r,this.toastrService=l,this.timeValues=T.a,this.scheduleTableData=[],this.statusList=p.q,this.courses=[],this.dispalyStatusList=p.s,this.scheduleTableDataLength=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("id");this.getAllCourses(),this.genrateFiltersForm(),this.payload={pageNumber:0,pageSize:10,sortField:"date",sortOrder:1,studentIds:[e],...this.filtersForm.value},this.getSchedules()}getSchedules(){this.SchedulesService.getSchedulesBySearchByCriteria(this.payload).subscribe(e=>{console.log(e),this.scheduleTableData=e.data,this.scheduleTableDataLength=e.totalCount},e=>{console.log(e)})}genrateFiltersForm(){this.filtersForm=this.formBuilder.group({tutorIds:[[]],subjects:[[]],dateRange:[[]],status:[[]]})}clear(e){e.clear()}getAllCourses(){this.SchedulesService.getAllCourses().subscribe(e=>{console.log(e),this.courses=e.data})}applyFilters(){this.payload={...this.payload,...this.filtersForm.value},this.getSchedules()}paginate(e){console.log(e),this.payload={...this.payload,pageNumber:e.firxt,pageSize:e.row},this.getSchedules()}updateSchedule(e,n){const r={...n,status:e};this.SchedulesService.updateSchedule(n._id,r).subscribe(l=>{this.toastrService.success(l.message),this.getSchedules()},l=>{this.toastrService.error(l.error.message??"unable to update! Please try again later")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.F),t.Y36(u.qu),t.Y36(v.V),t.Y36(y._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-student-schedules"]],decls:17,vars:8,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"breadcrumb-item","active"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","showCurrentPageReport","rowsPerPageOptions","paginator","rows","totalRecords","onLazyLoad"],["dt1",""],["pTemplate","caption"],["pTemplate","emptymessage"],["pTemplate","header"],["pTemplate","body"],[3,"formGroup"],["defaultLabel","Tutor Id","optionLabel","tutor._id","display","chip","autoWidth","true","formControlName","tutorIds","optionValue","tutor._id",1,"m-1",3,"options"],["defaultLabel","Select a Subjects","optionLabel","courseName","display","chip","autoWidth","true","formControlName","subjects","optionValue","courseName",1,"m-1",3,"options"],["placeholder","Select Date","formControlName","dateRange","inputId","icon","dateFormat","yy-mm-dd",1,"m-1",3,"showIcon"],["placeholder","Select Status","optionLabel","value","optionValue","value","display","chip","autoWidth","true","formControlName","status",1,"m-1",3,"options"],["pButton","","type","button","label","Apply Filters","type","button",1,"p-button-primary",3,"click"],[4,"ngFor","ngForOf"],["pButton","","type","button","label","Cancel",1,"p-button-text","p-button-danger","m-1",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedules"),t.qZA(),t.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",7),t._uU(10,"Schedules"),t.qZA()()()()(),t.TgZ(11,"p-table",8,9),t.NdJ("onLazyLoad",function(l){return n.paginate(l)}),t.YNc(13,b,6,5,"ng-template",10),t.YNc(14,A,3,1,"ng-template",11),t.YNc(15,x,15,0,"ng-template",12),t.YNc(16,F,15,6,"ng-template",13),t.qZA()),2&e&&(t.xp6(7),t.Q6J("routerLink","/student/dashboard"),t.xp6(4),t.Q6J("value",n.scheduleTableData)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(7,U))("paginator",!0)("rows",10)("totalRecords",n.scheduleTableDataLength))},dependencies:[c.sg,i.yS,m.iA,C.jx,h.f,g.Hq,S.NU,u._Y,u.JJ,u.JL,u.sg,u.u]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[i.Bz.forChild(N),i.Bz]}),o})();var D=s(4076),O=s(1493),I=s(2210),R=s(1740),j=s(1997),q=s(8235),B=s(8177);let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,J,m.U$,h._8,B.JH,O.S,S.q4,D.vI,I.kW,g.hJ,R.j,q.q,u.u5,u.UX,j.U]}),o})()}}]);