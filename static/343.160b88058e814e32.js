"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[343],{6864:(g,p,o)=>{o.d(p,{F:()=>u});var r=o(4650),h=o(6557);let u=(()=>{class c{constructor(a){this.httpDataService=a}getAllCourses(){return this.httpDataService.get("course")}getSchedulesBySearchByCriteria(a){return this.httpDataService.post("schedule/searchByCriteria",a)}updateSchedule(a,_){return this.httpDataService.put(`schedule/${a}`,_)}getSchedulesByScheduleId(a){return console.log(a),this.httpDataService.get(`schedule/${a}`)}updateAcceptStatus(a){return this.httpDataService.post("schedule/acceptSchdule",a)}}return c.\u0275fac=function(a){return new(a||c)(r.LFG(h.L))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},4343:(g,p,o)=>{o.d(p,{B:()=>j});var r=o(2887),h=o(7914),u=(()=>{return(s=u||(u={})).STUDENT="Student",s.TUTOR="Tutor",s.ADMIN="Admin",u;var s})(),c=o(5622),t=o(4650),a=o(2912),_=o(6864),f=o(4946),S=o(7185),T=o(9886),D=o(791),b=o(792),m=o(6895),v=o(433),x=o(5593),C=o(5047);function Z(s,l){if(1&s&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tutorDetails.title," ")}}function A(s,l){if(1&s&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.tutorDetails.description," ")}}function E(s,l){if(1&s&&(t.TgZ(0,"div",29)(1,"p",30),t._uU(2,"Contact Address"),t.qZA(),t.TgZ(3,"div",31)(4,"p",32),t._UZ(5,"i",33),t._uU(6),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.tutorDetails.address," ")}}function y(s,l){if(1&s&&(t.TgZ(0,"div",24)(1,"h4",25),t._uU(2),t.qZA(),t.YNc(3,Z,2,1,"p",26),t.YNc(4,A,2,1,"p",26),t.TgZ(5,"p",27),t._uU(6),t.qZA(),t.YNc(7,E,7,1,"div",28),t.qZA()),2&s){const e=t.oxw();t.xp6(2),t.AsE(" ",e.displayDetails.firstName," ",e.displayDetails.lastName," "),t.xp6(1),t.Q6J("ngIf",!e.isTutor),t.xp6(1),t.Q6J("ngIf",!e.isTutor),t.xp6(2),t.hij(" ",e.displayDetails.email," "),t.xp6(1),t.Q6J("ngIf",e.isTutor)}}function I(s,l){if(1&s&&(t.TgZ(0,"div",36)(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"span",37),t._uU(4),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(1),t.Tol(e.statusClass(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.hij(" ",null==e.scheduleDetails?null:e.scheduleDetails.status," "),t.xp6(2),t.hij("$",e.tutorDetails.hourlyRate," / Hour")}}function N(s,l){if(1&s&&(t.TgZ(0,"div",34),t.YNc(1,I,5,4,"div",35),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.scheduleDetails)}}function U(s,l){if(1&s&&(t.TgZ(0,"div",34)(1,"h3"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Tol(e.statusClass(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.hij(" ",null==e.scheduleDetails?null:e.scheduleDetails.status," ")}}function q(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function J(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.TgZ(2,"button",42),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REJECTED))}),t.qZA(),t.BQk()}}function L(s,l){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.acceptSchedule(n.statusList.ACCEPTED))}),t.qZA(),t.TgZ(2,"button",44),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA(),t.BQk()}}function P(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",19)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",11)(5,"div",38)(6,"div")(7,"p"),t._uU(8,"Total Amount"),t.qZA(),t.TgZ(9,"p-inputNumber",39),t.NdJ("ngModelChange",function(n){t.CHM(e);const d=t.oxw();return t.KtG(d.totalAmountTobePaid=n)}),t.qZA()(),t.TgZ(10,"div"),t.YNc(11,q,3,0,"ng-container",40),t.YNc(12,J,3,0,"ng-container",40),t.YNc(13,L,3,0,"ng-container",40),t.qZA()()()()}if(2&s){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.totalAmountTobePaid),t.xp6(2),t.Q6J("ngIf",e.statusList.REQUESTED===(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.Q6J("ngIf",e.statusList.ACCEPTED===(null==e.scheduleDetails?null:e.scheduleDetails.status)),t.xp6(1),t.Q6J("ngIf",e.statusList.REJECTED===(null==e.scheduleDetails?null:e.scheduleDetails.status))}}function w(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.navigateToPayment())}),t.qZA()}}function R(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.CANCELLED))}),t.qZA()}}function k(s,l){if(1&s){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSchedule(n.statusList.REQUESTED))}),t.qZA()}}function B(s,l){if(1&s&&(t.TgZ(0,"div",10)(1,"div",19)(2,"h4"),t._uU(3,"Amount and Actions"),t.qZA()(),t.TgZ(4,"div",11)(5,"div",38)(6,"div")(7,"h4"),t._uU(8,"Total Amount To be Paid"),t.qZA(),t.TgZ(9,"h3",45),t._uU(10),t.qZA()(),t.TgZ(11,"div"),t.YNc(12,w,1,0,"button",46),t.YNc(13,R,1,0,"button",47),t.YNc(14,k,1,0,"button",48),t.qZA()()()()),2&s){const e=t.oxw();t.xp6(10),t.hij("$",e.totalAmountTobePaid,""),t.xp6(2),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)===e.statusList.ACCEPTED),t.xp6(1),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)!==e.statusList.CANCELLED),t.xp6(1),t.Q6J("ngIf",(null==e.scheduleDetails?null:e.scheduleDetails.status)===e.statusList.CANCELLED)}}function Y(s,l){if(1&s&&(t.TgZ(0,"div",54)(1,"div")(2,"h5"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()),2&s){const e=l.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(t.xi3(4,3,e.date,"MMM d, y")),t.xp6(3),t.AsE("",i.timeValues[e.from]," - ",i.timeValues[e.to],"")}}function M(s,l){if(1&s&&(t.TgZ(0,"div",52),t.YNc(1,Y,7,6,"div",53),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.scheduleDetails.slots)}}function Q(s,l){1&s&&t._UZ(0,"hr")}function F(s,l){if(1&s&&(t.TgZ(0,"div")(1,"h3"),t._uU(2),t.qZA(),t.TgZ(3,"p",57),t._uU(4),t.qZA(),t.YNc(5,Q,1,0,"hr",40),t.qZA()),2&s){const e=l.$implicit,i=l.last;t.xp6(2),t.Oqu(e.courseName),t.xp6(2),t.Oqu(e.courseDiscription),t.xp6(1),t.Q6J("ngIf",!i)}}function O(s,l){if(1&s&&(t.TgZ(0,"div",55)(1,"h4",20),t._uU(2,"Course Details"),t.qZA(),t._UZ(3,"hr"),t.YNc(4,F,6,3,"div",56),t.qZA()),2&s){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.scheduleDetails.subjects)}}let j=(()=>{class s{constructor(e,i,n,d,K,$,H,G,V){this.router=e,this.activatedRoute=i,this.sharedSchedulesService=n,this.studentSchedulesService=d,this.toastrService=K,this.modalService=$,this.SchedulesService=H,this.storageService=G,this.sharedService=V,this.scheduleId="",this.timeValues=h.a,this.statusList=c.q,this.logedinUserRole="tutor",this.isTutor=!1,this.slots=[],this.totalAmountTobePaid=0}ngOnInit(){const e=this.storageService.getDataFromLocalStorage("role");this.logedinUserRole=e===u.TUTOR?"tutor":"student",this.isTutor=e===u.TUTOR,this.activatedRoute.queryParams.subscribe(i=>{this.scheduleId=i.sid}),this.scheduleId&&""!==this.scheduleId&&this.getSchedulesDetailsByScheduleId()}getSchedulesDetailsByScheduleId(){this.sharedSchedulesService.getSchedulesByScheduleId(this.scheduleId).subscribe(e=>{console.log(e),this.scheduleDetails=e?.schedule,this.tutorDetails=e?.schedule?.tutor[0],this.displayDetails="tutor"===this.logedinUserRole?e?.schedule?.student[0]:e?.schedule?.tutor[0],this.slots=e?.schedule?.slots,console.log(this.scheduleDetails),this.calculateTotalAmount()})}statusClass(e){return e===c.q.ACCEPTED?"accept":e===c.q.REQUESTED?"pending":e===c.q.CANCELLED||e===c.q.CANCELLED?"reject":e===c.q.COMPLETED?"accept":""}navigateToPayment(){this.studentSchedulesService.updateSelectedScheduleDetails(this.scheduleDetails),this.studentSchedulesService.updateAmount(this.scheduleDetails.amount),this.router.navigate(["/payment-page"])}updateSchedule(e){const i={student:this.scheduleDetails.student[0]._id,tutor:this.tutorDetails.userId,status:e};this.modalRef=this.modalService.show(r.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Are you sure want to change status to ${e} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateSchedule(this.scheduleDetails._id,i).subscribe(d=>{this.toastrService.success(d.message),this.getSchedulesDetailsByScheduleId()},d=>{this.toastrService.error(d.error.message??"unable to update! Please try again later")})})}acceptSchedule(e){const i={id:this.scheduleDetails._id,amount:this.totalAmountTobePaid};this.modalRef=this.modalService.show(r.$,{class:"modal-dialog modal-dialog-centered",initialState:{confirmMessage:`Processed with Accepting the schedule with $${this.totalAmountTobePaid} ?`}}),this.modalRef.content.onClose.subscribe(n=>{n&&this.SchedulesService.updateAcceptStatus(i).subscribe(d=>{this.toastrService.success(d.message),this.getSchedulesDetailsByScheduleId()},d=>{this.toastrService.error(d.error.message??"unable to update! Please try again later")})})}navigateToBackPages(e){this.router.navigate([`/${this.logedinUserRole}/${e}`])}calculateTotalAmount(){let e=0;for(let i=0;i<this.slots.length;i++)e+=(this.slots[i].to-this.slots[i].from)/2*this.tutorDetails.hourlyRate;this.totalAmountTobePaid=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(_.F),t.Y36(f.g),t.Y36(S._W),t.Y36(T.tT),t.Y36(_.F),t.Y36(D.V),t.Y36(b.F))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-schedule-details"]],decls:39,vars:8,consts:[[1,"page-header"],[1,"row"],[1,"col"],[1,"page-title"],[1,"breadcrumb"],[1,"breadcrumb-item","cursor"],[3,"click"],[1,"breadcrumb-item","active"],[1,"card","mb-2"],[1,"content","mx-2"],[1,"card"],[1,"card-body"],[1,"mentor-widget"],[1,"user-info-left","align-items-center"],[1,"mentor-img","d-flex","flex-wrap","justify-content-center"],[1,"pro-avatar"],["class","user-info-cont",4,"ngIf"],["class","user-info-right d-flex align-items-end flex-wrap",4,"ngIf"],["class","card",4,"ngIf"],[1,"card-header"],[1,"widget-title"],["class","d-flex wrap",4,"ngIf"],[1,"card-body","custom-border-card","pb-0"],["class","widget about-widget custom-about mb-0",4,"ngIf"],[1,"user-info-cont"],[1,"usr-name"],["class","mentor-type",4,"ngIf"],[1,"mentor-type"],["class","mentor-action",4,"ngIf"],[1,"mentor-action"],[1,"mentor-type","social-title"],[1,"mentor-details","m-0"],[1,"user-location","m-0"],[1,"fas","fa-map-marker-alt"],[1,"user-info-right","d-flex","align-items-end","flex-wrap"],["class","hireme-btn text-center",4,"ngIf"],[1,"hireme-btn","text-center"],[1,"hire-rate","mt-2"],[1,"d-flex","justify-content-between"],["inputId","integeronly",3,"ngModel","ngModelChange"],[4,"ngIf"],["pButton","","type","button","label","Accept",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Reject",1,"p-button","p-button-danger","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","m-1",3,"click"],["pButton","","type","button","label","Cancel",1,"p-button","p-button-danger","m-1",3,"click"],[2,"color","green"],["pButton","","pRipple","","type","button","label","Procced To Payment","class","p-button-sm p-button-raised p-button-success m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Cancel Schedule","class","p-button-sm p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Request Schedule","class","p-button-warning p-button m-1",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","Procced To Payment",1,"p-button-sm","p-button-raised","p-button-success","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Cancel Schedule",1,"p-button-sm","p-button-warning","p-button","m-1",3,"click"],["pButton","","pRipple","","type","button","label","Request Schedule",1,"p-button-warning","p-button","m-1",3,"click"],[1,"d-flex","wrap"],["class","accept m-1 p-2",4,"ngFor","ngForOf"],[1,"accept","m-1","p-2"],[1,"widget","about-widget","custom-about","mb-0"],[4,"ngFor","ngForOf"],[1,"mb-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4,"Schedules"),t.qZA(),t.TgZ(5,"ul",4)(6,"li",5)(7,"a",6),t.NdJ("click",function(){return i.navigateToBackPages("dashboard")}),t._uU(8,"Dashboard"),t.qZA()(),t.TgZ(9,"li",5)(10,"a",6),t.NdJ("click",function(){return i.navigateToBackPages("schedules")}),t._uU(11,"Schedules"),t.qZA()(),t.TgZ(12,"li",7),t._uU(13,"Schedule Details"),t.qZA()()()()(),t.TgZ(14,"div",8)(15,"div",9)(16,"div")(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15),t._uU(23),t.qZA()(),t.YNc(24,y,8,6,"div",16),t.qZA(),t.YNc(25,N,2,1,"div",17),t.YNc(26,U,3,3,"div",17),t.qZA()()(),t.TgZ(27,"div"),t.YNc(28,P,14,4,"div",18),t.YNc(29,B,15,4,"div",18),t.qZA(),t.TgZ(30,"div",10)(31,"div",19)(32,"h4",20),t._uU(33,"Slot Details"),t.qZA()(),t.TgZ(34,"div",11),t.YNc(35,M,2,1,"div",21),t.qZA()(),t.TgZ(36,"div",8)(37,"div",22),t.YNc(38,O,5,1,"div",23),t.qZA()()()()()),2&e&&(t.xp6(23),t.hij(" ",i.sharedService.getNameInitials(null==i.displayDetails?null:i.displayDetails.firstName,null==i.displayDetails?null:i.displayDetails.lastName)," "),t.xp6(1),t.Q6J("ngIf",i.displayDetails),t.xp6(1),t.Q6J("ngIf",!i.isTutor),t.xp6(1),t.Q6J("ngIf",i.isTutor&&i.scheduleDetails),t.xp6(2),t.Q6J("ngIf",i.isTutor),t.xp6(1),t.Q6J("ngIf",!i.isTutor),t.xp6(6),t.Q6J("ngIf",i.scheduleDetails),t.xp6(3),t.Q6J("ngIf",i.scheduleDetails))},dependencies:[m.sg,m.O5,v.JJ,v.On,x.Hq,C.Rn,m.uU],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}"]}),s})()},4946:(g,p,o)=>{o.d(p,{g:()=>h});var r=o(4650);let h=(()=>{class u{constructor(){this.amountToBePaid=0}updateSelectedScheduleDetails(t){this.selectedScheduleDetails=t}updateAmount(t){this.amountToBePaid=t}}return u.\u0275fac=function(t){return new(t||u)},u.\u0275prov=r.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);